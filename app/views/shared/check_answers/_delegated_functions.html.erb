<% proceedings.each do |proceeding| %>
  <% if proceeding.used_delegated_functions? %>

    <%= govuk_summary_list(card: { title: proceeding.meaning },
                           html_attributes: { id: "delegated-functions-question__#{proceeding.name}" },
                           actions: !read_only) do |summary_list| %>
      <%= summary_list.with_row(html_attributes: { id: "app-check-your-answers__used_delegated_functions_reported_on" }) do |row| %>
        <%= row.with_key(text: t(".reported_on"), classes: "govuk-!-width-one-half") %>
        <%= row.with_value(text: proceeding.used_delegated_functions_reported_on) %>
      <% end %>

      <%= summary_list.with_row(html_attributes: { id: "app-check-your-answers__used_delegated_functions_on" }) do |row| %>
        <%= row.with_key(text: t(".used_on"), classes: "govuk-!-width-one-half") %>
        <%= row.with_value(text: proceeding.used_delegated_functions_on) %>
      <% end %>

      <%= summary_list.with_row(html_attributes: { id: "app-check-your-answers__delegated_functions_days_to_report" }) do |row| %>
        <%= row.with_key(text: t(".days_to_report"), classes: "govuk-!-width-one-half") %>
        <%= row.with_value(text: distance_of_time_in_words(proceeding.used_delegated_functions_reported_on, proceeding.used_delegated_functions_on)) %>
      <% end %>
    <% end %>

  <% else %>

    <%= govuk_summary_list(card: { title: proceeding.meaning },
                           html_attributes: { id: "delegated-functions-question__#{proceeding.name}" },
                           actions: !read_only) do |summary_list| %>
      <%= summary_list.with_row(html_attributes: { id: "app-check-your-answers__used_delegated_functions_reported_on" }) do |row| %>
        <%= row.with_value(text: t(".not_used"), classes: "govuk-!-width-full") %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
