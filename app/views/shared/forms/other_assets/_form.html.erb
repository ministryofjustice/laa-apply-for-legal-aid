<%
none_selected_id = '#other_assets_declaration_check_box_none_selected'
%>
<%= form_with(model: model, url: url, method: :patch, local: true) do |form| %>

  <%= govuk_form_group show_error_if: (@form.errors.present? && !@form.any_checkbox_checked?) do %>
    <%= govuk_fieldset_header do %>
      <h1 class="govuk-fieldset__heading govuk-!-padding-bottom-7"><%= page_title %></h1>
      <h2 class="govuk-heading-m"><%= sub_heading %></h2>
    <% end %>
    <fieldset class="govuk-fieldset" aria-describedby="citizenship-conditional-hint">
      <div class="govuk-checkboxes" data-module="checkboxes">
        <div class="deselect-group" data-deselect-ctrl="<%= none_selected_id %>">
          <%= render partial: '/shared/forms/revealing_checkbox/attribute',
                     collection: Citizens::OtherAssetsForm::VALUABLE_ITEMS_VALUE_ATTRIBUTE,
                     locals: { model: model, form: form } %>
          <%= render partial: '/shared/forms/other_assets/second_home_conditional_checkbox', locals: { model: model, form: form } %>
          <%= render partial: '/shared/forms/revealing_checkbox/attribute',
                     collection: Citizens::OtherAssetsForm::SINGLE_VALUE_ATTRIBUTES,
                     locals: { model: model, form: form } %>
        </div>
      </div>

      <p class="govuk-!-padding-top-4"><%= or_break %></p>

      <div class="govuk-checkboxes">
        <div class="govuk-checkboxes__item">
          <%= form.check_box('check_box_none_selected', { class: 'govuk-checkboxes__input' }, 'true', false) %>
          <%= form.label('check_box_none_selected', none_selected, class: 'govuk-label govuk-checkboxes__label') %>
        </div>
      </div>

    </fieldset>
  <% end %>

  <%= next_action_buttons(
        show_draft: local_assigns.key?(:show_draft) ? show_draft : false,
        form: form
      ) %>
<% end %>
