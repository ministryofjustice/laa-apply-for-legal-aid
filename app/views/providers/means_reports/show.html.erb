<%= page_template page_title: t('.heading'), back_link: :none do %>
  <% @legal_aid_application = legal_aid_application if @legal_aid_application.nil? %>
  <% @cfe_result = cfe_result if @cfe_result.nil? %>
  <% @manual_review_determiner = manual_review_determiner if @manual_review_determiner.nil? %>

  <%= render 'shared/application_ref', legal_aid_application: @legal_aid_application %>

  <h2 class="govuk-heading-m"><%= t('.client_details_heading') %></h2>

  <%= render(
        'shared/check_answers/client_details',
        attributes: %i[first_name last_name date_of_birth age national_insurance_number],
        applicant: @legal_aid_application.applicant,
        read_only: true
      ) %>

  <% if @legal_aid_application.cfe_result&.version_4? %>
    <h2 class="govuk-heading-m"><%= t('.proceeding_eligibility') %></h2>
    <%= render 'shared/means_report/proceeding_eligibility', results: @legal_aid_application.cfe_result.results_by_proceeding_type %>
  <% end %>

  <h2 class="govuk-heading-m">
    <%= t('.benefit_check_heading') %>
  </h2>

  <dl class="govuk-summary-list govuk-!-margin-bottom-9">
    <%= check_answer_link(
          name: :receives_benefit,
          question: t('.question_receives_benefit'),
          answer: yes_no(@legal_aid_application.applicant_receives_benefit?),
          read_only: true
        ) %>
  </dl>

  <% if @legal_aid_application.non_passported? %>
    <% if @legal_aid_application.uploading_bank_statements? %>
      <section class="print-no-break">
        <%= render('income_categories', read_only: true) %>
      </section>

      <section class="print-no-break">
        <%= render('student_finance', read_only: true) %>
      </section>

      <section class="print-no-break">
        <%= render('income_cash_payments', read_only: true) %>
      </section>

      <section class="print-no-break">
        <%= render('outgoings_categories', read_only: true) %>
      </section>

      <section class="print-no-break">
        <%= render('outgoings_cash_payments', read_only: true) %>
      </section>
    <% end %>

    <% unless @legal_aid_application.uploading_bank_statements? %>
      <h2 class="govuk-heading-m">
        <%= t('.income_result_heading') %>
      </h2>

      <%= render 'shared/check_answers/income_result', read_only: true %>

      <section class="print-no-break">
        <h2 class="govuk-heading-m">
          <%= t('.income_details_heading') %>
        </h2>
        <%= render 'shared/check_answers/income_details' %>
      </section>
    <% end %>

    <section class="print-no-break">
      <% if @legal_aid_application.extra_employment_information? %>
        <%= render 'shared/check_answers/employed_income', read_only: true %>
      <% end %>
    </section>

    <section class="print-no-break">
      <% if @legal_aid_application.full_employment_details? %>
        <%= render 'shared/check_answers/full_employment_details', read_only: true %>
      <% end %>
    </section>

    <div class="govuk-!-padding-bottom-8"></div>

    <% unless @legal_aid_application.uploading_bank_statements? %>
      <section class="print-no-break">
        <h2 class="govuk-heading-l"><%= t('.debits-section-heading') %></h2>
        <%= render 'shared/check_answers/outgoings_details' %>
      </section>

      <div class="govuk-!-padding-bottom-8"></div>

      <section class="print-no-break">
        <h2 class="govuk-heading-l"><%= t('.deductions-section-heading') %></h2>
        <%= render 'shared/check_answers/deductions_details' %>
      </section>

      <div class="govuk-!-padding-bottom-8"></div>
    <% end %>

    <section class="print-no-break">
      <h2 class="govuk-heading-l"><%= t('.caseworker-review-section-heading') %></h2>
      <%= render partial: 'caseworker_review', locals: {manual_review_determiner: @manual_review_determiner } %>
    </section>

  <% end %>

  <% unless @legal_aid_application.uploading_bank_statements? %>
    <section class="print-no-break">
      <h2 class="govuk-heading-m">
        <%= t('.capital_result_heading') %>
      </h2>

      <%= render 'shared/check_answers/capital_result', read_only: true %>
    </section>
  <% end %>

  <h2 class="govuk-heading-m">
    <%= t('.assets_heading') %>
  </h2>

  <%= render 'shared/check_answers/assets', read_only: true %>

  <% if @legal_aid_application.passported? && @manual_review_determiner.manual_review_required? %>
    <section class="print-no-break">
      <h2 class="govuk-heading-l"><%= t('.caseworker-review-section-heading') %></h2>
      <%= render partial: 'caseworker_review', locals: { manual_review_determiner: @manual_review_determiner } %>
    </section>
  <% end %>
<% end %>

<% if @legal_aid_application.uploading_bank_statements? %>
  <section class="print-no-break">
    <%= render('shared/check_answers/bank_statements', bank_statements: @legal_aid_application.attachments.bank_statement_evidence, read_only: true) %>
  </section>
<% end %>
