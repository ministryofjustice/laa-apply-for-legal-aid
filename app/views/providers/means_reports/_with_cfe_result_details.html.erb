<% if @legal_aid_application.cfe_result.version >= 4 %>
  <%= render "proceeding_eligibility", results: @legal_aid_application.cfe_result.results_by_proceeding_type %>
<% end %>

<%= render "receives_benefits" %>

<% if @legal_aid_application.non_passported? %>
  <h2 class="govuk-heading-m">
    <%= t(".income_result_heading") %>
  </h2>

  <%= render "shared/check_answers/income_result", read_only: true %>

  <% if @legal_aid_application.applicant.state_benefits.any? %>
    <section class="print-no-break">
      <%= render "shared/check_answers/benefits_breakdown" %>
    </section>
  <% end %>

  <section class="print-no-break">
    <h2 class="govuk-heading-m">
      <%= t(".income_details_heading") %>
    </h2>
    <%= render "shared/check_answers/income_details" %>
  </section>

  <% if @legal_aid_application.applicant.extra_employment_information? ||
    @legal_aid_application.applicant.has_partner_with_no_contrary_interest? && @legal_aid_application.partner.extra_employment_information? %>
    <section class="print-no-break govuk-!-padding-bottom-8">
      <div class="govuk-grid-row" id="app-check-your-answers__employment">
        <div class="govuk-grid-column-two-thirds">
          <h3 class="govuk-heading-m"><%= t(".employment_heading") %></h3>
        </div>
      </div>
      <%= govuk_summary_list(actions: false, html_attributes: { id: "client_employment-income-questions" }) do |summary_list| %>

      <% if @legal_aid_application.applicant.extra_employment_information? %>
        <%= summary_list.with_row(html_attributes: { id: "app-check-your-answers__client_extra_employment_details" }) do |row| %>
          <%= row.with_key(text: t(".employment_details.client"), classes: "govuk-!-width-one-half") %>
          <%= row.with_value { @legal_aid_application.applicant.extra_employment_information_details } %>
        <% end %>
      <% else %>
        <%= summary_list.with_row(html_attributes: { id: "app-check-your-answers__client_full_employment_details" }) do |row| %>
          <%= row.with_key(text: t(".full_employment_details.client"), classes: "govuk-!-width-one-half") %>
          <%= row.with_value { @legal_aid_application.full_employment_details.presence || "-" } %>
        <% end %>
      <% end %>

      <% if @legal_aid_application.applicant.has_partner_with_no_contrary_interest? %>
        <% if @legal_aid_application.partner.extra_employment_information? %>
            <%= summary_list.with_row(html_attributes: { id: "app-check-your-answers__partner_extra_employment_details" }) do |row| %>
              <%= row.with_key(text: t(".employment_details.partner"), classes: "govuk-!-width-one-half") %>
              <%= row.with_value { @legal_aid_application.partner.extra_employment_information_details } %>
            <% end %>
        <% else %>
            <%= summary_list.with_row(html_attributes: { id: "app-check-your-answers__partner_full_employment_details" }) do |row| %>
              <%= row.with_key(text: t(".full_employment_details.partner"), classes: "govuk-!-width-one-half") %>
              <%= row.with_value { @legal_aid_application.partner.full_employment_details.presence || "-" } %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    </section>
  <% end %>

  <section class="print-no-break">
    <h2 class="govuk-heading-l"><%= t(".debits-section-heading") %></h2>
    <%= render "shared/check_answers/outgoings_details" %>
  </section>

  <div class="govuk-!-padding-bottom-8"></div>

  <section class="print-no-break">
    <h2 class="govuk-heading-l"><%= t(".deductions-section-heading") %></h2>
    <%= render "shared/check_answers/deductions_details" %>
  </section>

  <div class="govuk-!-padding-bottom-8"></div>

  <%= render "caseworker_review" %>
<% end %>

<section class="print-no-break">
  <h2 class="govuk-heading-m">
    <%= t(".capital_result_heading") %>
  </h2>

  <%= render "shared/check_answers/capital_result", read_only: true %>
</section>

<h2 class="govuk-heading-m">
  <%= t(".assets_heading") %>
</h2>
<% individual = "_with_partner" if @legal_aid_application.applicant.has_partner_with_no_contrary_interest? %>
<%= render "shared/check_answers/assets", read_only: true, individual: %>

<% if @legal_aid_application.passported? && @manual_review_determiner.manual_review_required? %>
    <%= render "caseworker_review" %>
<% end %>

<% if @legal_aid_application.uploading_bank_statements? %>
<div class="govuk-!-padding-bottom-8"></div>

<section class="print-no-break">
  <% has_partner = @legal_aid_application.applicant.has_partner_with_no_contrary_interest? %>
  <h3 class="govuk-heading-m"><%= t(".bank_statement_heading") %></h3>
  <%= govuk_summary_list(actions: false, classes: "govuk-!-margin-bottom-9") do |summary_list| %>
    <%= summary_list.with_row(html_attributes: { id: "app-check-your-answers__bank_statements_client" }) do |row| %>
      <%= row.with_key(text: has_partner ? t(".bank_statement_question_with_partner") : t(".bank_statement_question"), classes: "govuk-!-width-one-half") %>
      <%= row.with_value do %>
        <ul class="govuk-list">
          <% attachments_with_size(@legal_aid_application.attachments.bank_statement_evidence).each do |answer| %>
            <li><%= answer %></li>
          <% end %>
        </ul>
      <% end %>
    <% end %>
    <% if has_partner %>
      <%= summary_list.with_row(html_attributes: { id: "app-check-your-answers__bank_statements_partner" }) do |row| %>
        <%= row.with_key(text: t(".partner_bank_statement_question"), classes: "govuk-!-width-one-half") %>
        <%= row.with_value do %>
          <ul class="govuk-list">
            <% attachments_with_size(@legal_aid_application.attachments.partner_bank_statement_evidence).each do |answer| %>
              <li><%= answer %></li>
            <% end %>
          </ul>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
</section>
<% end %>
