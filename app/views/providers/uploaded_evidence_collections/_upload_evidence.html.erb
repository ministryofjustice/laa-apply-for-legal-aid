<%= form_with(
      model: @upload_form,
      url: providers_legal_aid_application_uploaded_evidence_collection_path,
      method: :patch,
      local: true
    ) do |form| %>

  <%= form.govuk_error_summary %>

  <%= form.govuk_fieldset legend: {text: page_title, tag: 'h1', size: 'xl'} do %>

    <div class="govuk-!-padding-bottom-6"></div>

    <div class="govuk-body"><%= t('.list_text') %></div>

    <ul class="govuk-list govuk-list--bullet govuk-!-padding-bottom-2">
      <% @required_documents.each do |evidence| %>
        <li><%= evidence == 'benefit_evidence' ? t(".#{evidence}", benefit: @legal_aid_application.dwp_override.passporting_benefit.titleize) : t(".#{evidence}") %></li>
      <% end %>
    </ul>

    <div class="govuk-!-padding-bottom-4"></div>

    <div class="dropzone__upload">
      <div class="govuk-form-group script hidden" id="dropzone-form-group" aria-labelledby="dropzone-label">
        <label class="govuk-label govuk-label--m" id="dropzone-label">
          <%= t('.upload_file') %>
        </label>
        <div class="govuk-hint"><%= t('.size_hint') %></div>

        <span class="hidden" aria-hidden="true" id="application-id"><%= @upload_form.model.legal_aid_application_id %></span>
        <span class="hidden" aria-hidden="true" id="dropzone-url" data-url="/v1/uploaded_evidence_collections"></span>
        <p id="dropzone-error" class="govuk-error-message hidden">
          <span class="govuk-visually-hidden">Error:</span>
        </p>
        <div class="dropzone" id="dropzone-form">
          <div class="dz-message" data-dz-message>
            <p class="govuk-body govuk-!-padding-top-2 script"><%= t('.dropzone_message') %></p>
            <button id="dz-upload-button" class="govuk-button govuk-button--secondary script" tabindex="0"><%= t('.choose_files_btn') %></button>
          </div>
        </div>
      </div>

      <div class="fallback no-script">
        <%= form.govuk_file_field :original_file, label: {text: t('generic.attach_file'), size: 'm'},
                                  hint: {text: t('.size_hint')},
                                  classes: ['govuk-file-upload moj-multi-file-upload__input'] %>
        <%= form.submit(
              t('generic.upload'),
              id: 'upload',
              name: 'upload_button',
              class: 'govuk-button govuk-button--secondary form-button moj-multi-file-upload__button'
            ) %>
      </div>
    </div>

    <% if @successfully_deleted %>
      <span role="alert" class="govuk-visually-hidden"><%= @successfully_deleted %></span>
    <% end %>
    <% if @error_message || @successful_upload %>
      <span role="alert" class="govuk-visually-hidden"><%= @successful_upload %><%= @error_message %></span>
    <% end %>
  <% end %>
<% end %>
