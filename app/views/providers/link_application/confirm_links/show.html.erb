
<%= form_with(
      model: @form,
      url: providers_legal_aid_application_link_application_confirm_link_path,
      method: :patch,
      local: true,
    ) do |form| %>

  <%= page_template(
        page_title: t(".heading"),
        form:,
        template: :basic,
      ) do %>

    <h1 class="govuk-heading-xl"><%= page_title %></h1>

    <%= govuk_summary_list(
          classes: "govuk-summary-list govuk-summary-list--no-border",
          actions: false,
        ) do |summary_list|
          summary_list.with_row do |row|
            row.with_key(text: t(".laa_reference"))
            row.with_value(text: @legal_aid_application.target_application&.application_ref)
          end
          summary_list.with_row do |row|
            row.with_key(text: t(".client"))
            row.with_value(text: @legal_aid_application.target_application&.applicant&.full_name)
          end
          summary_list.with_row do |row|
            text = @legal_aid_application.target_application.proceedings.map(&:meaning).join(", ") if @legal_aid_application.target_application
            row.with_key(text: t(".proceedings"))
            row.with_value(text:)
          end
        end %>

    <%= render partial: "shared/all_linked_applications" %>

    <%= form.govuk_radio_buttons_fieldset(:confirm_link, legend: { tag: "h2", size: "l", text: t(".link_case") }) do %>
      <%= form.govuk_radio_button :confirm_link, true, label: { text: t("generic.yes") }, link_errors: true %>
      <%= form.govuk_radio_button :confirm_link, "No", label: { text: t(".options.no_link_to_different_case") } %>
      <%= form.govuk_radio_button :confirm_link, false, label: { text: t(".options.no_carry_on_without_linking") } %>
    <% end %>

    <%= next_action_buttons(show_draft: true, form:) %>
  <% end %>
<% end %>
